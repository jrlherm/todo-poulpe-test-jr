<div class="container">
  <div class="col-12 col-md-8 offset-md-2">
    <div class="text-center mt-3">
      <h1>My Tasks</h1>
      <p>Always do your best.</p>
      <% if current_user.tasks.empty? %>
        <p>You have no tasks to do yet. <%= link_to 'Add a task', new_task_path %></p>
      <% else %>
        <ul class="list-unstyled text-left">
          <% @tasks.each do |task| %>
            <a href="/tasks/<%= task.id %>" id="task-<%= task.id %>">
              <li>
                <div class="card mb-2">
                  <div class="card-body d-flex flex-row align-items-center">
                    <h5 class="flex-grow-1"><%= task.title.capitalize %></h5>
                    <div class="ml-auto text-right">
                      <% if task.deadline %>
                        <p class="mb-1"><small><strong><i class="far fa-clock"></i> Deadline:</strong><br><%= task.deadline %></small></p>
                      <% end %>
                    </div>
                  </div>
                </div>
              </li>
            </a>
          <% end %>
        </ul>
      <% end %>

      <hr class="mt-5">

      <%= simple_form_for([@task], remote: true) do |f| %>
        <h5 class="text-left mb-3">New task</h5>
        <div class="d-flex mx-0 px-0">
          <div class="col-6 pl-0">
            <%= f.input :title,
                        label: false,
                        placeholder: "Enter a title for your task*",
                        input_html: { class: "mb-3" } %>
          </div>
          <div class="col-3 pl-0">
            <%= f.input :priority,
                        label: false,
                        collection: 1..5,
                        prompt: "Priority",
                        placeholder: "Priority",
                        input_html: {class: "flex-grow-1"} %>
          </div>
          <div class="col-3 pr-0 pl-0">
            <%= f.input :deadline,
                        label: false,
                        as: :string,
                        required: false,
                        placeholder: "Deadline",
                        input_html: {class: "datepicker"} %>
          </div>
        </div>

        <%= f.submit 'Validate',
                      class: "mt-2 mb-5 btn btn-primary rounded-pill d-block col-12" %>
      <% end %>

    </div>
  </div>
</div>
